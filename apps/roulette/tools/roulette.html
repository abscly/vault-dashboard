<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a1a">
    <title>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ â€” AbsCL Portal</title>
    <!-- å…±é€šCSSï¼ˆå…¨ãƒ„ãƒ¼ãƒ«å…±é€šï¼‰ -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/components.css">
</head>

<body>
    <div class="app">
        <!-- ===== ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆæˆ»ã‚‹ãƒœã‚¿ãƒ³ä»˜ãï¼‰ ===== -->
        <header class="tool-header">
            <a href="../index.html" class="back-btn">â†</a>
            <h1 class="tool-title">ğŸ° ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</h1>
        </header>

        <!-- ===== ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ ===== -->
        <main class="main" style="display:flex;flex-direction:column;align-items:center;gap:20px;">

            <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div class="result-display" id="display">
                <span class="result-text" id="resultText">?</span>
            </div>

            <p style="color:var(--text-muted);font-size:0.8rem;" id="memberInfo"></p>

            <!-- ã‚¹ãƒ”ãƒ³ãƒœã‚¿ãƒ³ -->
            <button class="btn btn-primary" id="spinBtn" style="font-size:1.1rem;min-width:180px;">
                ğŸ² SPIN!
            </button>

            <!-- å±¥æ­´ -->
            <div style="width:100%;max-width:300px;margin-top:auto;">
                <h3 style="font-size:0.85rem;color:var(--text-muted);text-align:center;margin-bottom:8px;">ğŸ“œ å±¥æ­´</h3>
                <div id="historyList" style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center;"></div>
            </div>
        </main>
    </div>

    <script>
        // ===== AbsCLãƒ¡ãƒ³ãƒãƒ¼é…åˆ— =====
        const MEMBERS = [
            "simrhythm", "cizcky", "suitooou", "alpha", "dorayaki",
            "swamp", "ore25iti5", "reu", "cappuccino", "kyoppi",
            "azveil", "Slumberland", "ososhi", "goggles", "gomaru",
            "stohuro", "takenicle", "goto", "BB", "MK"
        ];

        // DOM
        const display = document.getElementById('display');
        const resultText = document.getElementById('resultText');
        const spinBtn = document.getElementById('spinBtn');
        const historyList = document.getElementById('historyList');
        const memberInfo = document.getElementById('memberInfo');

        // State
        let isSpinning = false;
        const history = [];

        memberInfo.textContent = `${MEMBERS.length} ãƒ¡ãƒ³ãƒãƒ¼`;

        // ===== ã‚¹ãƒ”ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ =====
        spinBtn.addEventListener('click', () => {
            if (isSpinning) return;
            isSpinning = true;
            spinBtn.disabled = true;

            display.className = 'result-display active';
            resultText.className = 'result-text';

            const duration = 2500;
            const start = Date.now();

            function animate() {
                const elapsed = Date.now() - start;
                const progress = elapsed / duration;
                const delay = 50 + Math.pow(progress, 3) * 400;

                resultText.textContent = MEMBERS[Math.floor(Math.random() * MEMBERS.length)];

                if (elapsed < duration) {
                    setTimeout(animate, delay);
                } else {
                    // æœ€çµ‚çµæœ
                    const winner = MEMBERS[Math.floor(Math.random() * MEMBERS.length)];
                    resultText.textContent = winner;
                    resultText.className = 'result-text gold';
                    display.className = 'result-display highlight';

                    // å±¥æ­´
                    history.unshift(winner);
                    if (history.length > 10) history.pop();
                    historyList.innerHTML = history
                        .map((n, i) => `<span class="badge ${i === 0 ? 'gold' : ''}">${i === 0 ? 'ğŸ† ' : ''}${n}</span>`)
                        .join('');

                    // ãƒã‚¤ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                    if (navigator.vibrate) navigator.vibrate([100, 50, 200]);

                    setTimeout(() => {
                        isSpinning = false;
                        spinBtn.disabled = false;
                    }, 800);
                }
            }
            animate();
        });
    </script>
</body>

</html>